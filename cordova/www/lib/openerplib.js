var openerplib={};openerplib.json_rpc=function(h,i,k,j){var l={jsonrpc:"2.0",params:k,id:Math.floor((Math.random()*1000000000)+1)};if(i){l.method=i}var m=new XMLHttpRequest();m.open("POST",h,true);m.setRequestHeader("Content-Type","application/json");m.onreadystatechange=function(){if(m.readyState!==4||!j){return}var a=m.getResponseHeader("Content-Type");if(m.status!==200){j("Offline",null)}else{if(a.indexOf("application/json")!==0){j('Expected JSON encoded response, found "'+a+'"',null)}else{var b=JSON.parse(this.responseText);j(b.error||null,b.result||null)}}};m.ontimeout=function(){j("Timeout",null)};try{m.send(JSON.stringify(l))}catch(n){j(n,null)}};openerplib.Service=function(f,d){var e=this;this.con=f;this.service=d;this.exec=function(b,a,c){e.con.send(e.service,b,a,c)}};openerplib.Model=function(d,e){var f=this;this.service=new openerplib.Service(d,"object");this.con=d;this.model=e;this.exec=function(c,b,a,h){f.service.exec("execute_kw",[d.database,d.user_id,d._password,f.model,c,b,a],h)}};openerplib.JsonRPCConnector=function(l,k,h,g,j){var i=this;this._url=l;this._url_jsonrpc=l+"/jsonrpc";this._password=g;this.login=h;this.database=k;this.user_id=j;this.session_id=null;this.user_context=null;this.authenticate=function(b){var c={db:i.database,login:i.login,password:i._password};var a=i._url+"/web/session/authenticate";openerplib.json_rpc(a,null,c,function(d,e){if(d===null){i.session_id=e.session_id;i.user_id=e.uid;i.user_context=e.user_context}if(b){b(d,e)}})};this.send=function(a,c,b,d){openerplib.json_rpc(i._url_jsonrpc,"call",{service:a,method:c,args:b},d)};this.get_service=function(a){return new openerplib.Service(i,a)};this.get_model=function(a){return new openerplib.Model(i,a)}};openerplib.get_connection=function(l,j,h,k,i,m){if(!h){h=8069}var n=l+":"+h.toString();switch(j){case"jsonrpcs":n="https://"+n;break;default:n="http://"+n;break}return new openerplib.JsonRPCConnector(n,k,i,m,null)};